\chapter{Resultados e Discussões}\label{chap_results}

Este capítulo está dividido em três partes. A primeira parte descreve os objetivos dos experimentos conduzidos neste trabalho. A segunda é dedicada à descrição da configuração na qual os experimentos foram realizados, máquinas (processador e memória RAM) e sistemas operacionais. A terceira apresenta os resultados obtidos quando se realizaram os experimentos com os \textit{benchmarks} selecionados, assim como uma discussão sobre os resultados obtidos e avaliação geral do método proposto nesta dissertação.

\section{Objetivos do Experimento}\label{sec:experimental-objectives}

Utilizando os \textit{benchmarks} propostos, os experimentos têm os seguintes objetivos:

\begin{enumerate}

\item Demonstrar a aplicabilidade da metodologia para a síntese de controladores digitais.

\item Avaliar as vantagens da metodologia comparada a outras existentes.

\end{enumerate}

\section{Configuração Experimental e Descrição dos \textit{Benchmarks}}\label{sec:experimental-setup}

Os experimentos foram conduzidos em máquinas com diferentes configurações, para acelerar a geração dos resultados. Parte foi executada em um processador Intel Core i$7$ -- $4500$ $1$.$8$GHz, com $32$ GB de RAM e executando sistema operacional Linux Mint $64$-bits. Outra parte foi executada em um processador Intel Core i$7$ -- $4500$ $1$.$8$GHz, com $16$ GB de RAM e executando sistema operacional Linux Ubuntu Server $64$-bits. Uma outra parte foi conduzida em um processador Intel Core i$7$ -- $7700$ $3$.$6$GHz, com $32$ GB de RAM e executando sistema operacional Linux Ubuntu $64$-bits. A ultima parte foi obtida em um processador Intel Core i$7$ -- $4500$ $1$.$8$Ghz, com $16$ GB de RAM e executando sistema operacional Linux Ubuntu $64$-bits.

Os benchmarks com os sistemas de controle usados para avaliar a abordagem proposta são descritos a seguir. Em particular, os benchmarks usados neste trabalho estão disponíveis na Tabela, e fornece informações sobre as matrizes de espaço de estados $ \mathbf{A} $, $ \mathbf{B} $ e $ \mathbf{C} $, mais ou menos na forma canônica de Jordan~\cite{chen1995linear}, tempo de assentamento requerido $t_{\mathrm{sr}}$ e porcentagem de sobressinal requerido $PO_{\mathrm{r}}$. Todos os benchmarks apresentam a matriz de espaço de estados $ D = [0] $ e foram escolhidos porque abordam diferentes cenários em relação a autovalores de $ \mathbf{A} $. Existem sistemas de $ 2\textsuperscript{nd} $, $ 3\textsuperscript{rd} $, $ 4\textsuperscript{th} $ e $ 5\textsuperscript{th} $ ordem e um de auta ordem ($ 17\textsuperscript{th} $), com autovalores iguais,  diferentes, reais e complexos. Além disso, dois deles são exemplos do mundo real: o 15 representa uma planta física real de um motor DC e o 16 descreve uma planta física de levitação magnética. Além disso, o benchmark 17 é um sistema de $ 17\textsuperscript{th} $ ordem baseado no fornecido por \cite{tran2016large} e depois discretizado. Os benchmarks utilizados em nosso estudo não contêm sistemas MIMO (multiple-input multiple-output), uma vez que a metodologia proposta é capaz de verificar apenas os SISO, no momento.

Há $51$ experimentos considerando somente tempo de assentamento divididos em 3 diferentes configurações de FWL ($ 8 $, $ 16 $ e $ 32 $ bits), mais $51$ exeperimentos considerando somente sobressinal, novamente dididos em 3 diferentes configurações de FWL ($ 8 $, $ 16 $ e $ 32 $ bits). Também foram realizados $51$ experimentos considerando ambas as propriedades (tempo de assentamento e sobressinal) e incluindo novamente experimentos de 3 diferentes formatos de FWL ($ 8 $, $ 16 $ e $ 32 $ bits)


\section{Resultados Experimentais}\label{sec:experimental-results}

A Tabela~\ref{table:results} resume os resultados experimentais. ``\textbf{\#}'' descreve uma identificação do \textit{benchmark}, \textbf{R} representa resultado da síntese (bem ou mal sucedida), \textbf{T} é o número de tentativas para realizar a síntese, \textbf{t} identifica o tempo levado para sintetizar um controlador, e, finalmente, $\langle 4,4 \rangle $, $\langle 8,8 \rangle $ e $\langle 16,16 \rangle $ representam o formato de FWL considerando, onde representam no total $8$, $16$ e $32$, respectivamente.

\begin{table}[ht]
\renewcommand{\arraystretch}{1.0}
\caption{Resultados dos experimentos}
\label{table:results}
\centering
%\footnotesize
%\scriptsize
%\tiny
\miniscule
\begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|}
\hline
\textbf{\#}       & \multicolumn{9}{c|}{\textbf{Tempo de Assentamento}}                                                                                                                               & \multicolumn{9}{c|}{\textbf{Sobressinal}}                                                                                                                                         & \multicolumn{9}{c|}{\textbf{Tempo de Assentamento e Sobressinal}}                                                                                                        \\ \hline
\multirow{2}{*}{} & \multicolumn{3}{c|}{\textit{$\langle 4,4 \rangle $}}      & \multicolumn{3}{c|}{\textit{$\langle 8,8 \rangle $}}      & \multicolumn{3}{c|}{\textit{$\langle 16,16 \rangle $}}    & \multicolumn{3}{c|}{\textit{$\langle 4,4 \rangle $}}      & \multicolumn{3}{c|}{\textit{$\langle 8,8 \rangle $}}      & \multicolumn{3}{c|}{\textit{$\langle 16,16 \rangle $}}    & \multicolumn{3}{c|}{$\langle 4,4 \rangle $}      & \multicolumn{3}{c|}{\textit{$\langle 8,8 \rangle $}}      & \multicolumn{3}{c|}{\textit{$\langle 16,16 \rangle $}}    \\ \cline{2-28} 
                  & \textit{\textbf{R}} & \textit{\textbf{T}} & \textit{\textbf{t}} & \textit{\textbf{R}} & \textit{\textbf{T}} & \textit{\textbf{t}} & \textit{\textbf{R}} & \textit{\textbf{T}} & \textit{\textbf{t}} & \textit{\textbf{R}} & \textit{\textbf{T}} & \textit{\textbf{t}} & \textit{\textbf{R}} & \textit{\textbf{T}} & \textit{\textbf{t}} & \textit{\textbf{R}} & \textit{\textbf{T}} & \textit{\textbf{t}} & \textit{\textbf{R}} & \textit{\textbf{T}} & \textit{\textbf{t}} & \textit{\textbf{R}} & \textit{\textbf{T}} & \textit{\textbf{t}} & \textit{\textbf{R}} & \textit{\textbf{T}} & \textit{\textbf{t}} \\ \hline
1                 &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &           &                     &                &                    &                     &                &                    &                     &                \\ \hline
2                 &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &           &                     &                &                    &                     &                &                    &                     &                \\ \hline
3                 &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &           &                     &                &                    &                     &                &                    &                     &                \\ \hline
4                 &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &           &                     &                &                    &                     &                &                    &                     &                \\ \hline
5                 &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &           &                     &                &                    &                     &                &                    &                     &                \\ \hline
6                 &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &           &                     &                &                    &                     &                &                    &                     &                \\ \hline
7                 &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &           &                     &                &                    &                     &                &                    &                     &                \\ \hline
8                 &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &           &                     &                &                    &                     &                &                    &                     &                \\ \hline
9                 &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &           &                     &                &                    &                     &                &                    &                     &                \\ \hline
10                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &           &                     &                &                    &                     &                &                    &                     &                \\ \hline
11                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &           &                     &                &                    &                     &                &                    &                     &                \\ \hline
12                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &           &                     &                &                    &                     &                &                    &                     &                \\ \hline
13                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &           &                     &                &                    &                     &                &                    &                     &                \\ \hline
14                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &           &                     &                &                    &                     &                &                    &                     &                \\ \hline
15                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &           &                     &                &                    &                     &                &                    &                     &                \\ \hline
16                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &           &                     &                &                    &                     &                &                    &                     &                \\ \hline
17                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &                    &                     &                &           &                     &                &                    &                     &                &                    &                     &                \\ \hline
\multicolumn{28}{|l|}{\textbf{S} = Síntese bem sucedida e \textbf{F} = Síntese mal sucedida}
\\ \hline
\end{tabular}
\end{table}



\subsection{Comparação com Outras Técnicas de Projeto de Controladores Digitais}
\label{sec:comparison-controller-design}

Algumas abordagens de projeto de controladores digitais são utilizados por engenheiros de controle, alguns deles foram mostrados na Seção~\ref{sec:tpcsd}. Agora mostraremos uma comparação de algumas dessas técnicas com a empregada neste trabalho, frente a um problema de controle do mundo real.

O modelo que utilizaremos é o \textit{benchmark} $14$ da Tabela~\ref{table:bench}.

\subsubsection{Alocação de Polos}
\label{sec:alopol}
Usando a técnica de alocação de polos, conforme descrito em \eqref{subsec:ap}, temos que,

Primeiramente obtemos o polinômio característico da matriz $\mathbf{A}$ e aplicamos na Equação~\ref{eq:matrixQ}, para obter a matrix $\mathbf{P}$, que é

\begin{equation*}
P=1.0e+06 \times \begin{bmatrix}
   -2.2464 &  -0.0337  &  0.9006  &  0.0135 \\
   -2.2464 &  -0.0112  &  0.8984  &  0.0045 \\
   -2.2464 &   0.0112  &  0.8984  & -0.0045 \\
   -2.2464 &   0.0337  &  0.9006  & -0.0135 
\end{bmatrix}
\end{equation*}

\noindent Agora, calculamos o polinômio característico dos autovalores desajados para obter a matrix $\bar{K}$,

\begin{equation*}
\bar{K}=\begin{bmatrix}
    0.2629 &  -0.7552  &  0.7233  & -0.2309
\end{bmatrix}
\end{equation*}

\noindent com isso, podemos calcular o controlador $\mathbf{K}$,

\begin{equation*}
\mathbf{K}=\bar{K}P= \begin{bmatrix}
  -61.9933 & -33.5040 &  95.0597 &  18.8300
\end{bmatrix}
\end{equation*}

Esse controlador, quando aplicado ao sistema, faz com que obtenhamos o comportamento que desejamos, que é um tempo de assentamento próximo a $t_\mathrm{sr}=$ e $PO_\mathrm{r}=$.

A resposta do sistema é mostrada na Figura.


\subsubsection{Regulador Quadrático Linear}
\label{sec:regqudLin}
Como objetivo de projetar um controlador utilizando a técnica do regulador quadrático linear, usamos a metodologia implementada pelo Matlab~\cite{guide1998mathworks} que consiste em minimizar  a função de custo $J(u)=\sum_{n=1}^\infty \left( x[n]^TQx[n]+u[n]^TRu[n]+2x[n]^TNu[n] \right)$ para o sistema em tempo discreto em \eqref{eq:ssed}.

Além do ganho de realimentação de estado $\mathbf{K}$, a metodologia implementada pelo Matlab retorna a solução de horizonte infinito $S$ da equação Riccati de tempo discreto associada~\cite{bittanti2012riccati}. O controlador $\mathbf{K}$ é derivado de $S$ por $\mathbf{K} = (B^TSB + R)^{-1}(B^TSA + N^T)$, onde obtivemos $\mathbf{K}=[  -61.9933 ~ -33.5040 ~  95.0597  ~ 18.8300]$. Com isso, obtivemos uma resposta do sistema conforme desejávamos, como pode ser visto na Figura.



\subsubsection{Sintonia Automática}
\label{sec:sinaut}


\subsection{Aplicando a Abordagem Proposta na Prática}
\label{sec:method-in-practice}


\subsection{Considerações Finais}
\label{sec:final-considerations}

%Os benchmarks aplicados basicamente apresentam um tipo de erro: bloqueios fatais, assertivas, aquisição de semáforos, divisão por zero, segurança de ponteiros, estouro aritmético, ou violação de limites de vetores. Logo, aplicaram-se diferentes regras, dependendo da falha detectada. A Figura~\ref{figure:summary-verification-results} mostra um resumo de todos os resultados obtidos, o qual mostra que a metodologia proposta gera informações úteis sobre execuções mal-sucedidas, com relação ao erro presente no benchmark, em $84$.$21$\% dos benchmarks utilizados, além de identificar quais linhas estão relacionadas à falha associada e quais valores podem ser atribuídos para produzir uma execução bem-sucedida. Com relação aos benchmarks utilizados, a abordagem não foi capaz de diagnosticar linhas defeituosas em três deles, devido à modelagem da biblioteca concorrente do C, visto que tais benchmarks apresentaram problemas de bloqueios fatais e sincronização.
%
%\begin{figure*}[htb]
%\centering
%\includegraphics[scale=0.75]{figures/verification_results}
%\caption{Resumo dos resultados de verificação}
%\label{figure:summary-verification-results}
%\end{figure*}
%
%A Figura~\ref{figure:summary-verification-time} mostra um resumo do tempo de verificação necessário para cada benchmark. Treze programas levaram menos de $2$ segundos, de forma a avaliar as falhas existentes e as atribuições associadas para produzir uma execução bem-sucedida, três programas não foram verificados corretamente, com tempos associados de verificação menores que  $2$ segundos, e, finalmente, três benchmarks levaram cerca de $4$ a $5$ vezes mais para produzir resultados úteis. Com relação ao último caso, analizando o processo de verificação do verificador de modelos, foi possível apontar o gargalo como sendo o solucionador SMT, devido à quantidade de fontes de não-determinismo presentes em tais benchmarks. No entanto, o tempo de verificação em média ainda é baixo, se comparado com o que pode ser obtido com depuração de programas não-assistida~\cite{Mayer:2008}.
%
%\begin{figure*}[htb]
%\centering
%\includegraphics[scale=0.75]{figures/verification_time}
%\caption{Resumo dos resultados de todos os benchmarks}
%\label{figure:summary-verification-time}
%\end{figure*}
%
%Em resumo, os resultados apresentados mostram que a metodologia proposta é apropriada para localizar falhas em programas concorrentes em C, e que o tempo de verificação necessário para produzir uma execução bem-sucedida do programa é curto. Logo, a metodologia proposta pode ser útil para auxiliar desenvolvedores a depurar programas.

\section{Resumo}\label{chap-5-summary}

%Neste capítulo apresentou a avaliação experimental realizada para o método proposto neste trabalho, assim como considerações a serem feitas sobre a metodologia apresentada. O experimento foi conduzido com um computador padrão e os dados obtidos foram analizados, mostrando a viabilidade do método para encontrar linhas defeituosas em códigos concorrentes, tendo uma taxa de sucesso de $84$.$21$\%, considerando todos os benchmarks propostos. A metodologia proposta mostrou-se útil para determinar as linhas defeituosas em um programa concorrente. No entanto, a dependência de um contraexemplo para iniciar o processo de transformação de código levou a alguns benchmarks não serem avaliados, pois o ESBMC não foi capaz de retornar um contraexemplo para os mesmos. Também é importante notar que após a transformação de código ser feita, o tempo de verificação do código instrumentado foi sempre menor que $1$ segundo. De modo geral, a metodologia garante que a correção no código original das linhas obtidas nos contraexemplos do novo código sequencial levam a uma execução bem-sucedida do programa.
